@model TiendaVirtual.Models.Producto

@{
    ViewBag.Title = "CategoryProductsDetails";
}

<div style="display:flex; flex-direction: column; align-items:center; margin-top:30px;">
    <h4 style="font-size: calc(1.405rem + 1.86vw);"><bold>@Html.DisplayFor(model => model.Nombre)</bold></h4>
    <dl class="dl-horizontal">
        <div style="display:flex; flex-direction: row; justify-content:center; align-items:center;">
            <img src="@Html.DisplayFor(model => model.Imagen)" width="700px" style="margin-right: 2%;" />
            <div>
                <dt>
                    Stock disponible
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.Cantidad)
                </dd>

                <dd>
                    @Html.DisplayFor(model => model.Precio) €
                </dd>

                <dt>
                    @Html.LabelFor(model => model.Cantidad)
                </dt>

                <dd>
                    <input type="number" id="cantidadInput" value="1" min="1" max="@Model.Cantidad" name="cantidad" style="border: none;
                                                                  background-color: rgba(240, 235, 233, .5); -webkit-background-clip: padding-box;
                                                                  background-clip: padding-box;
                                                                  padding: 8px; border-radius: 10px;" />
                </dd>

                <dd>
                    <button type="button" class="btn btn-success" id="result" onclick="prueba()" style="padding: 1.214rem 2.4rem;
                        font-size: 1.143rem;
                        line-height: 1.5;
                        border-radius: 2.14286rem;
                        color: #fff;
                        background-color: #e74739;
                        border-color: #e74739;
                        box-shadow: inset 0 1px 0 hsla(0,0%,100%,.15),0 1px 1px rgba(0,0,0,.075);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                            <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"></path>
                        </svg>
                        Añadir al carrito
                    </button>
                </dd>
            </div>
        </div>

    </dl>
</div>

<p>
    @Html.ActionLink("Volver", "CategoryProducts", "Categorias", new { id = Model.Categoria.Id }, null)
</p>

<script>
    function prueba() {
        console.log("dgfdgf");
        var linkpart1 = location.href.split("/Categorias/");
        var url = linkpart1[0] + "/Categorias/AddToCart/" + @Model.Id + "?cantidad=" + document.getElementById("cantidadInput").value;
        location.href = url;
    }

</script>